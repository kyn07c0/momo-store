stages:
  - module-pipelines

backend:
  stage: module-pipelines
  trigger:
    include:
      - "/backend/.gitlab-ci.yml"
    strategy: depend
  only:
    changes:
      - backend/**/*

frontend:
  stage: module-pipelines
  trigger:
    include:
      - "/frontend/.gitlab-ci.yml"
    strategy: depend
  only:
    changes:
      - frontend/**/*

prometheus:
  stage: module-pipelines
  trigger:
    include:
      - "/helm/prometheus/.gitlab-ci.yml"
    strategy: depend
  only:
    changes:  
      - helm/prometheus/**/*

grafana:
  stage: module-pipelines
  trigger:
    include:
      - "/helm/grafana/.gitlab-ci.yml"
    strategy: depend
  only:
    changes:  
      - helm/grafana/**/*

loki:
  stage: module-pipelines
  trigger:
    include:
      - "/helm/loki/.gitlab-ci.yml"
    strategy: depend
  only:
    changes:
      - helm/loki/**/*

promtail:
  stage: module-pipelines
  trigger:
    include:
      - "/helm/promtail/.gitlab-ci.yml"
    strategy: depend
  only:
    changes:
      - helm/promtail/**/*
